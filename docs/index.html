<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìö</text></svg>">
  <style>
    .content {
      margin-top: 8px !important;
      padding-top: 0 !important;
    }

    .markdown-section {
      margin-top: 0 !important;
      padding-top: 0 !important;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin-top: 0.5em !important;
    }

    /* Sidebar width adjustments for long reading names */
    .sidebar {
      width: 340px !important;
    }

    .sidebar-nav {
      padding-right: 10px;
    }

    .sidebar-nav li {
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    .sidebar-nav a {
      white-space: normal !important;
      line-height: 1.4 !important;
      padding: 6px 0 !important;
    }

    /* Adjust main content to account for wider sidebar */
    body .content {
      left: 340px !important;
    }

    /* Handle collapsed sidebar state */
    body.close .sidebar {
      width: 0 !important;
      border-right: none !important;
      transform: translateX(-340px);
    }

    body.close .content {
      left: 0 !important;
    }

    /* Responsive design for smaller screens */
    @media screen and (max-width: 768px) {
      .sidebar {
        width: 280px !important;
      }

      body .content {
        left: 280px !important;
      }

      body.close .sidebar {
        transform: translateX(-280px);
      }
    }

    /* For mobile devices, use default Docsify responsive behavior */
    @media screen and (max-width: 600px) {
      .sidebar {
        width: 300px !important;
      }

      body .content {
        left: 0 !important;
      }

      body.close .sidebar {
        transform: translateX(-300px);
      }
    }

    /* Text Highlighting Styles */
    .highlight {
      background-color: #ffeb3b;
      cursor: pointer;
      position: relative;
      transition: background-color 0.2s;
    }

    .highlight.yellow {
      background-color: #ffeb3b;
    }

    .highlight.green {
      background-color: #a5d6a7;
    }

    .highlight.pink {
      background-color: #f48fb1;
    }

    .highlight.blue {
      background-color: #90caf9;
    }

    .highlight:hover {
      opacity: 0.8;
    }

    /* Highlight Toolbar */
    #highlight-toolbar {
      position: absolute;
      background: white;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 4px;
      display: none;
      z-index: 9999;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    #highlight-toolbar button {
      border: none;
      padding: 6px 10px;
      margin: 0 2px;
      cursor: pointer;
      border-radius: 3px;
      font-size: 12px;
      transition: background-color 0.2s;
    }

    #highlight-toolbar button:hover {
      background-color: #f0f0f0;
    }

    #highlight-toolbar button.yellow {
      background-color: #ffeb3b;
    }

    #highlight-toolbar button.green {
      background-color: #a5d6a7;
    }

    #highlight-toolbar button.pink {
      background-color: #f48fb1;
    }

    #highlight-toolbar button.blue {
      background-color: #90caf9;
    }

    #highlight-toolbar button.clear {
      background-color: #ffcdd2;
      color: #c62828;
    }
  </style>
</head>

<body>
  <div id="app"></div>
  <!-- Highlight Toolbar -->
  <div id="highlight-toolbar">
    <button class="yellow" data-color="yellow" title="Yellow highlight">‚¨õ</button>
    <button class="green" data-color="green" title="Green highlight">‚¨õ</button>
    <button class="pink" data-color="pink" title="Pink highlight">‚¨õ</button>
    <button class="blue" data-color="blue" title="Blue highlight">‚¨õ</button>
    <button class="clear" id="clear-highlights" title="Clear all highlights">üóëÔ∏è</button>
  </div>
  <!-- Dark/Light mode toggle button -->
  <div id="docsify-darklight-theme"></div>
  <script>
    window.$docsify = {
      name: '',
      repo: '',
      loadSidebar: true,
      subMaxLevel: 3,
      sidebarDisplayLevel: 1,
      alias: {
        '/.*/_sidebar.md': '/_sidebar.md'
      },
      mermaid: {
        theme: 'default'
      },
      darklightTheme: {
        defaultTheme: 'light',
        toggle: true
      },
      search: {
        maxAge: 86400000,
        paths: 'auto',
        placeholder: 'Type to search',
        noData: 'No Results!',
        depth: 4
      },
      pagination: {
        previousText: 'Previous',
        nextText: 'Next',
        crossChapter: true,
        crossChapterText: true
      },
      plugins: [
        function (hook, vm) {
          hook.doneEach(function () {
            // Re-render MathJax after each page load
            if (window.MathJax && window.MathJax.typesetPromise) {
              window.MathJax.typesetPromise();
            }
            // Restore highlights after page load
            if (window.restoreHighlights) {
              window.restoreHighlights();
            }
          });
        }
      ]
    }
  </script>
  <!-- MathJax configuration for Docsify -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        tags: 'ams',
        macros: {
          RR: "{\\bf R}",
          bold: ["{\\bf #1}", 1]
        },
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
        ignoreHtmlClass: 'tex2jax_ignore'
      },
      startup: {
        ready: () => {
          MathJax.startup.defaultReady();
          MathJax.startup.promise.then(() => {
            const observer = new MutationObserver(() => {
              if (MathJax.typesetPromise) {
                MathJax.typesetPromise();
              }
            });
            observer.observe(document.getElementById('app'), {
              childList: true,
              subtree: true
            });
          });
        }
      }
    };
  </script>
  <!-- MathJax for math rendering -->
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!-- Docsify v4 -->
  <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
  <!-- Sidebar Collapse Plugin -->
  <script src="https://cdn.jsdelivr.net/npm/docsify-sidebar-collapse/dist/docsify-sidebar-collapse.min.js"></script>
  <!-- Mermaid -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-mermaid@latest/dist/docsify-mermaid.min.js"></script>
  <!-- Dark theme -->
  <script src="//cdn.jsdelivr.net/npm/docsify-darklight-theme@3.2.0/dist/index.min.js"></script>
  <!-- Docsify search plugin -->
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <!-- Docsify print plugin -->
  <script src="https://cdn.jsdelivr.net/npm/docsify-print@1.2.0/dist/docsify-print.min.js"></script>
  <!-- Docsify zoom image plugin -->
  <script src="https://cdn.jsdelivr.net/npm/docsify-zoom-image/dist/docsify-zoom-image.min.js"></script>
  <!-- Docsify pagination plugin -->
  <script src="https://cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>
  <!-- Docsify tabs plugin -->
  <script src="https://cdn.jsdelivr.net/npm/docsify-tabs@1.4.4/dist/docsify-tabs.min.js"></script>
  <!-- Text Highlighting Script -->
  <script>
    (function () {
      const STORAGE_KEY = 'docsify-highlights';
      let currentSelection = null;
      const toolbar = document.getElementById('highlight-toolbar');

      // Load highlights from localStorage
      function loadHighlights() {
        const stored = localStorage.getItem(STORAGE_KEY);
        return stored ? JSON.parse(stored) : {};
      }

      // Save highlights to localStorage
      function saveHighlights(highlights) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(highlights));
      }

      // Get current page path
      function getCurrentPath() {
        return window.location.hash.replace('#/', '') || 'README';
      }

      // Generate unique ID for highlight
      function generateId() {
        return 'h-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
      }

      // Apply highlight to selected text
      function applyHighlight(color) {
        if (!currentSelection || currentSelection.isCollapsed) return;

        const range = currentSelection.getRangeAt(0);
        const selectedText = range.toString().trim();
        
        if (!selectedText) return;

        // Create highlight span
        const highlightSpan = document.createElement('span');
        highlightSpan.className = `highlight ${color}`;
        highlightSpan.dataset.highlightId = generateId();
        highlightSpan.dataset.color = color;

        try {
          range.surroundContents(highlightSpan);

          // Save to localStorage
          const highlights = loadHighlights();
          const path = getCurrentPath();
          if (!highlights[path]) highlights[path] = [];

          highlights[path].push({
            id: highlightSpan.dataset.highlightId,
            text: selectedText,
            color: color,
            xpath: getXPath(highlightSpan),
            timestamp: Date.now()
          });

          saveHighlights(highlights);

          // Add click listener to remove highlight
          highlightSpan.addEventListener('click', function (e) {
            e.stopPropagation();
            if (confirm('Remove this highlight?')) {
              removeHighlight(this.dataset.highlightId);
            }
          });
        } catch (e) {
          console.warn('Could not apply highlight:', e);
        }

        // Clear selection and hide toolbar
        window.getSelection().removeAllRanges();
        hideToolbar();
      }

      // Remove highlight
      function removeHighlight(highlightId) {
        const element = document.querySelector(`[data-highlight-id="${highlightId}"]`);
        if (element) {
          const parent = element.parentNode;
          while (element.firstChild) {
            parent.insertBefore(element.firstChild, element);
          }
          parent.removeChild(element);
          parent.normalize();
        }

        // Remove from storage
        const highlights = loadHighlights();
        const path = getCurrentPath();
        if (highlights[path]) {
          highlights[path] = highlights[path].filter(h => h.id !== highlightId);
          if (highlights[path].length === 0) {
            delete highlights[path];
          }
          saveHighlights(highlights);
        }
      }

      // Get XPath for element
      function getXPath(element) {
        if (element.id) return `//*[@id="${element.id}"]`;
        
        const path = [];
        while (element && element.nodeType === Node.ELEMENT_NODE) {
          let index = 0;
          let sibling = element.previousSibling;
          while (sibling) {
            if (sibling.nodeType === Node.ELEMENT_NODE && sibling.nodeName === element.nodeName) {
              index++;
            }
            sibling = sibling.previousSibling;
          }
          const tagName = element.nodeName.toLowerCase();
          const pathIndex = index ? `[${index + 1}]` : '';
          path.unshift(tagName + pathIndex);
          element = element.parentNode;
        }
        return '/' + path.join('/');
      }

      // Restore highlights for current page
      window.restoreHighlights = function () {
        const highlights = loadHighlights();
        const path = getCurrentPath();
        const pageHighlights = highlights[path] || [];

        pageHighlights.forEach(h => {
          try {
            const walker = document.createTreeWalker(
              document.querySelector('.markdown-section'),
              NodeFilter.SHOW_TEXT,
              null,
              false
            );

            let node;
            while (node = walker.nextNode()) {
              const text = node.textContent;
              const index = text.indexOf(h.text);
              
              if (index !== -1 && !node.parentElement.classList.contains('highlight')) {
                const range = document.createRange();
                range.setStart(node, index);
                range.setEnd(node, index + h.text.length);

                const highlightSpan = document.createElement('span');
                highlightSpan.className = `highlight ${h.color}`;
                highlightSpan.dataset.highlightId = h.id;
                highlightSpan.dataset.color = h.color;

                try {
                  range.surroundContents(highlightSpan);

                  highlightSpan.addEventListener('click', function (e) {
                    e.stopPropagation();
                    if (confirm('Remove this highlight?')) {
                      removeHighlight(this.dataset.highlightId);
                    }
                  });
                } catch (e) {
                  console.warn('Could not restore highlight:', e);
                }
                break;
              }
            }
          } catch (e) {
            console.warn('Error restoring highlight:', e);
          }
        });
      };

      // Show toolbar at selection
      function showToolbar(x, y) {
        toolbar.style.display = 'block';
        toolbar.style.left = x + 'px';
        toolbar.style.top = (y - 45) + 'px';
      }

      // Hide toolbar
      function hideToolbar() {
        toolbar.style.display = 'none';
      }

      // Handle text selection
      document.addEventListener('mouseup', function (e) {
        setTimeout(() => {
          const selection = window.getSelection();
          const selectedText = selection.toString().trim();

          if (selectedText && selection.rangeCount > 0) {
            const range = selection.getRangeAt(0);
            const rect = range.getBoundingClientRect();
            
            // Check if selection is within markdown content
            const container = selection.anchorNode.parentElement;
            if (container && container.closest('.markdown-section')) {
              currentSelection = selection;
              showToolbar(
                rect.left + (rect.width / 2) - 75,
                rect.top + window.scrollY
              );
            }
          } else {
            hideToolbar();
          }
        }, 10);
      });

      // Hide toolbar when clicking outside
      document.addEventListener('mousedown', function (e) {
        if (!toolbar.contains(e.target)) {
          hideToolbar();
        }
      });

      // Add event listeners to toolbar buttons
      document.querySelectorAll('#highlight-toolbar button[data-color]').forEach(button => {
        button.addEventListener('click', function (e) {
          e.stopPropagation();
          applyHighlight(this.dataset.color);
        });
      });

      // Clear all highlights button
      document.getElementById('clear-highlights').addEventListener('click', function (e) {
        e.stopPropagation();
        if (confirm('Clear all highlights on this page?')) {
          const highlights = loadHighlights();
          const path = getCurrentPath();
          delete highlights[path];
          saveHighlights(highlights);
          
          document.querySelectorAll('.highlight').forEach(el => {
            const parent = el.parentNode;
            while (el.firstChild) {
              parent.insertBefore(el.firstChild, el);
            }
            parent.removeChild(el);
            parent.normalize();
          });
          
          hideToolbar();
        }
      });
    })();
  </script>
</body>

</html>